{% extends 'base.html.twig' %}

{% block title %}{{ sujet.name }}{% endblock %}

{% block body %}

    {% for message in sujet.messageSujets %}
    {% if (loop.index %2) != 0 %}
      <div class="uk-card uk-card-default uk-width-1-2@m uk-align-center uk-margin-small-right">
        <div class="uk-card-header">
            <div class="uk-grid-small uk-flex-middle" uk-grid>
                {#<div class="uk-width-auto">
                    <img class="uk-border-circle" width="40" height="40" src="images/avatar.jpg">
                </div>#}
                <div class="uk-width-expand">
                    <h3 class="uk-card-title uk-margin-remove-bottom">{{message.user.firstName}}</h3>
                    <p class="uk-text-meta uk-margin-remove-top"><time datetime="2016-04-01T19:00">{{message.date|date('d-m-Y')}}</time></p>
                </div>
            </div>
        </div>
        <div class="uk-card-body">
            <p>{{ message.message }}</p>
        </div>
        {% if app.user.id == message.user.id %}
        <div class="uk-card-footer">
            <a href="{{ path('comment_sujet_edit', {id: message.id}) }}" class="uk-button uk-button-text">modifier</a>
            {{ include('comment_sujet/_delete_form.html.twig') }}
        </div>
        {% endif %}
    </div>
    {% else %}
    <div class="uk-card uk-card-default uk-width-1-2@m uk-align-center uk-margin-left">
        <div class="uk-card-header">
            <div class="uk-grid-small uk-flex-middle" uk-grid>
                {#<div class="uk-width-auto">
                    <img class="uk-border-circle" width="40" height="40" src="images/avatar.jpg">
                     <li>  autheur {{ message.user.firstName }} </li>
                </div>#}
                <div class="uk-width-expand">
                    <h3 class="uk-card-title uk-margin-remove-bottom">{{message.user.firstName}}</h3>
                    <p class="uk-text-meta uk-margin-remove-top"><time datetime="2016-04-01T19:00">{{message.date|date('d-m-Y')}}</time></p>
                </div>
            </div>
        </div>
        <div class="uk-card-body">
            <p>{{ message.message }}</p>
        </div>
        {% if app.user.id == message.user.id %}
        <div class="uk-card-footer">
            <a href="{{ path('comment_sujet_edit', {id: message.id}) }}" class="uk-button uk-button-text">modifier</a>
            {{ include('comment_sujet/_delete_form.html.twig') }}
        </div>
        {% endif %}
    </div>
    {% endif %}



    {% else %}
        Aucun sujet trouv√©.
    {% endfor %}
    <a href="{{ path('sujet_index') }}">
        Retour aux sujets
    </a>


    <div class="mt-6">
        <div class="max-w-4xl px-10 py-6 mx-auto bg-white rounded-lg shadow-md">

            <div class="mt-2"><a href="{{path('sujet_show', {id: sujet.id} ) }}" class="text-2xl font-bold text-gray-700 hover:underline">{{ sujet.name }}</a>
                <span class="block font-light text-gray-600">
                    {{ sujet.date|date('d-m-Y') }}
                </span>
                <p class="mt-2 text-gray-600">
                    {{sujet.longDescription}}
                </p>
            </div>

        </div>
    </div>

    <!-- component -->
    <!-- comment form -->
    <div class="flex mx-auto items-center justify-center shadow-lg mt-56 mx-8 mb-4 max-w-lg">
        <form class="w-full max-w-xl bg-white rounded-lg px-4 pt-2">
            <div class="flex flex-wrap -mx-3 mb-6">
                <h2 class="px-4 pt-3 pb-2 text-gray-800 text-lg">Add a new comment</h2>
                <div class="w-full md:w-full px-3 mb-2 mt-2">
                    {{ include('comment_sujet/new.html.twig') }}
                </div>
                <div class="w-full md:w-full flex items-start md:w-full px-3">
                    <div class="flex items-start w-1/2 text-gray-700 px-2 mr-auto">
                        <svg fill="none" class="w-5 h-5 text-gray-600 mr-1" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <p class="text-xs md:text-sm pt-px">Some HTML is okay.</p>
                    </div>
                    <div class="-mr-1">
                        <input type='submit' class="bg-white text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-gray-100" value='Post Comment'>
                    </div>
                </div>
        </form>
    </div>
    </div>
{% endblock %}
